# 環境調査レポート (2025-11-14)

本レポートは、WSL2 上で Kubernetes + GPU 計算環境を構築するための事前調査結果をまとめたもの。

---

## 1. ホスト・WSL 環境

- ホスト OS: Windows 11  
- WSL2: Ubuntu 20.04  
- 作業ディレクトリ: /home/dev/OCP

---

## 2. GPU 周りの確認結果

### 2.1 WSL から GPU が認識されている

使用コマンド:  
nvidia-smi

結果（RTX 4070 / CUDA 12.9 を確認）  
→ WSL 上で GPU が利用可能。

---

### 2.2 Docker コンテナから GPU が利用可能

使用イメージ: nvidia/cuda:12.2.0-base-ubuntu22.04  
nvidia-container-toolkit: インストール済

確認コマンド:  
docker run --rm --gpus all nvidia/cuda:12.2.0-base-ubuntu22.04 nvidia-smi

結果:  
→ コンテナ内からも GPU が見えることを確認済み。

---

## 3. Kubernetes / Docker / Git 確認

- Docker: GPU コンテナが動作  
- kubectl: v1.31.0  
- kind: v0.23.0  
- GitHub SSH 認証: 完了  
  ssh -T git@github.com → 認証成功

README にパイプライン構成を記載済み。  
push の動作確認済み。

---

## 4. 今後の作業予定

### Kubernetes（kind）
- kind クラスタ作成スクリプト (scripts/create_kind_cluster.sh)
- GPU ノードラベル付与

### Docker イメージ
- images/gromacs-mpi-cuda/ の Dockerfile
- images/vina/ の Dockerfile
- prep コンテナ（vina2gromacs 等）

### Kubernetes Job / PV / PVC
- drug-pipeline namespace
- zinc-library-pv/pvc, work-pv/pvc
- GPU 動作テスト Job
- gmx 最小化 Job（最初の GPU ジョブ）

### GitHub Actions
- K8s Job を起動する workflow
- GitHub Pages 自動更新

---

## 5. 結論

WSL → Docker → GPU まで完全に動作確認済み。  
GitHub SSH も安定。  
次は Dockerfile / YAML / kind クラスタ構築のフェーズへ進む。

